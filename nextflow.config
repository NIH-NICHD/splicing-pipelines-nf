manifest {
    homePage    = 'https://github.com/TheJacksonLaboratory/splicing-pipelines-nf/'
    description = 'Nextflow Implementation of Anczukow-Lab workflow for alternative splicing processing'
    mainScript  = 'main.nf'
}

params {
    // Main arguments
    reads                    = false
    singleEnd                = false
    star_index               = false
    gtf                      = false
    assembly_name            = false
    bams                     = false

    // Reads
    stranded                 = 'first-strand'
    rmats_pairs              = false
    adapter                  = false
    readlength               = false
    overhang                 = false
    mismatch                 = 2
    minlen                   = false
    slidingwindow            = true

    // rMATS
    statoff                  = false
    paired_stats             = false
    novelSS                  = false
    mil                      = 50
    mel                      = 500

    // Other
    test                     = false
    download_from            = false
    key_file                 = false
    skiprMATS                = false
    skipMultiQC              = false
    outdir                   = 'results'
    multiqc_config           = "$baseDir/examples/assets/multiqc_config.yaml" 
    help                     = false
}

process {
  container = 'gcr.io/nextflow-250616/splicing-pipelines-nf:gawk'
  withName: 'get_accession' {
    container = 'gcr.io/nextflow-250616/download_reads:latest'
  }
  withName: 'get_tcga_bams' {
    container = 'gcr.io/nextflow-250616/download_reads:latest'
  }
  withName: 'bamtofastq' {
    container = 'gcr.io/nextflow-250616/download_reads:latest'
  }
  withName: 'prep_de' {
    container = 'gcr.io/nextflow-250616/rmats:4.1.0'
  }
  withName: 'stringtie_merge' {
    container = 'gcr.io/nextflow-250616/splicing-pipelines-nf:gawk'
  }
  withName: 'rmats' {
    container = 'gcr.io/nextflow-250616/rmats:4.1.0'
  }
  withName: 'paired_rmats' {
    container = 'gcr.io/nextflow-250616/rmats:4.1.0'
  }
}

profiles {
  standard {
    includeConfig 'conf/executors/google.config'
   }  
  
  docker { docker.enabled = true }
  base { includeConfig 'conf/executors/base.config' }
  sumner { includeConfig 'conf/executors/sumner.config' }
  MYC_MCF10A_0h_vs_MYC_MCF10A_8h { includeConfig 'conf/examples/MYC_MCF10A_0h_vs_MYC_MCF10A_8h.config' }
  ultra_quick_test { includeConfig 'conf/examples/ultra_quick_test.config' }
}
